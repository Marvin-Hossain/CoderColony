import{c as h,r as i,b as _,j as e,d as A,u as E,a as $,e as B}from"./index-BjGb8Yy2.js";import{P as I}from"./PageHeader-OEJvW-zJ.js";import{H as P,S as F,F as H}from"./FlashcardDeckCard-CzO9pJul.js";import{p as O}from"./pillButton-cgms5vy8.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],V=h("arrow-up-down",U);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],W=h("clock",q);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Q=h("funnel",G);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Y=h("star",R);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],K=h("trending-up",J),X=({deckId:v,initialLikeCount:f,isLiked:g=!1,size:l="medium"})=>{const[d,a]=i.useState(g),[y,n]=i.useState(f),[b,{isLoading:u}]=_(),w=async p=>{if(p.stopPropagation(),u)return;const j=d,x=y,c=!j,N=c?x+1:x-1;a(()=>c),n(()=>N);try{await b(v).unwrap()}catch{a(j),n(x)}};let o="md";l==="small"?o="sm":l==="large"&&(o="lg");let m=16;return l==="small"?m=14:l==="large"&&(m=20),e.jsxs("button",{className:A(O({intent:d?"danger":"default",size:o,disabled:u})),onClick:w,disabled:u,"aria-label":d?"Unlike this deck":"Like this deck",style:{transition:"transform 0.15s ease"},children:[e.jsx(P,{size:m,fill:d?"currentColor":"none"}),e.jsx("span",{className:"tw-font-mono tw-text-sm",children:y})]})},re=()=>{const v=E(),[f,g]=i.useState(""),[l,d]=i.useState([]),[a,y]=i.useState("popular"),[n,b]=i.useState([]),[u,w]=i.useState(!1),{data:o=[],isLoading:m,error:p}=$({mine:!1}),[j]=B(),x=i.useMemo(()=>{const t=new Set;return o.forEach(s=>s.tags.forEach(r=>t.add(r))),Array.from(t).sort()},[o]),c=i.useMemo(()=>{let t=o.filter(s=>{var r;if(f){const k=f.toLowerCase();if(!(s.title.toLowerCase().includes(k)||((r=s.description)==null?void 0:r.toLowerCase().includes(k))||s.tags.some(z=>z.toLowerCase().includes(k))))return!1}return!(l.length>0&&!l.some(L=>s.tags.includes(L))||n.length>0&&!n.includes(s.difficulty))});return t.sort((s,r)=>{switch(a){case"popular":return r.likeCount-s.likeCount;case"newest":return new Date(r.createdAt).getTime()-new Date(s.createdAt).getTime();case"difficulty":return s.difficulty-r.difficulty;case"official":return s.isOfficial!==r.isOfficial?s.isOfficial?-1:1:r.likeCount-s.likeCount;default:return 0}}),t},[o,f,l,a,n]),N=async t=>{try{await j(t.deckId)}catch(s){console.error("Failed to log view:",s)}v(`/practice/flashcards/${t.deckId}`)},C=t=>{d(s=>s.includes(t)?s.filter(r=>r!==t):[...s,t])},D=t=>{b(s=>s.includes(t)?s.filter(r=>r!==t):[...s,t])},S=()=>{g(""),d([]),b([])},M=t=>["Beginner","Easy","Medium","Hard","Expert","Master"][t]||"Unknown",T=t=>{switch(t){case"popular":return e.jsx(K,{size:16});case"newest":return e.jsx(W,{size:16});case"difficulty":return e.jsx(V,{size:16});case"official":return e.jsx(Y,{size:16});default:return null}};return e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"container py-20 space-y-10",children:[e.jsx(I,{title:"Explore Flashcards",subtitle:"Discover and study public flashcard decks created by the community"}),e.jsxs("section",{className:"space-y-6 rounded-2xl border bg-card p-6 shadow-lg",children:[e.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center",children:[e.jsxs("div",{className:"relative w-full",style:{minWidth:"260px"},children:[e.jsx(F,{size:18,style:{position:"absolute",left:"1rem",top:"50%",transform:"translateY(-50%)",color:"var(--color-muted)"}}),e.jsx("input",{type:"text",placeholder:"Search decks, tags, or topics...",value:f,onChange:t=>g(t.target.value),className:"form-field w-full",style:{paddingLeft:"2.75rem"}})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>w(!u),className:`inline-flex items-center gap-2 rounded-full border px-4 py-2 text-sm font-semibold ${u?"bg-primary text-primary-foreground":"text-muted-foreground"}`,style:{transition:"all 0.2s ease"},children:[e.jsx(Q,{size:16}),"Filters",(l.length>0||n.length>0)&&e.jsx("span",{className:"inline-flex items-center rounded-full bg-danger/10 px-2 py-0.5 text-xs font-semibold text-danger",children:l.length+n.length})]}),e.jsxs("select",{className:"form-field w-full sm:w-auto",value:a,onChange:t=>y(t.target.value),children:[e.jsx("option",{value:"popular",children:"Most Popular"}),e.jsx("option",{value:"newest",children:"Newest First"}),e.jsx("option",{value:"difficulty",children:"By Difficulty"}),e.jsx("option",{value:"official",children:"Official First"})]})]})]}),u&&e.jsxs("div",{className:"space-y-6 rounded-2xl border bg-muted/20 p-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-semibold text-muted-foreground",children:"Difficulty Level"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[0,1,2,3,4,5].map(t=>{const s=n.includes(t);return e.jsx("button",{type:"button",onClick:()=>D(t),className:`rounded-full border px-3 py-1 text-xs font-medium ${s?"bg-primary text-primary-foreground":"text-muted-foreground"}`,style:s?{borderColor:"var(--color-primary)"}:void 0,children:M(t)},t)})})]}),x.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-semibold text-muted-foreground",children:"Popular Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:x.slice(0,10).map(t=>{const s=l.includes(t);return e.jsx("button",{type:"button",onClick:()=>C(t),className:`rounded-full border px-3 py-1 text-xs font-medium ${s?"bg-primary text-primary-foreground":"text-muted-foreground"}`,style:s?{borderColor:"var(--color-primary)"}:void 0,children:t},t)})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"button",onClick:S,className:"inline-flex items-center gap-2 rounded-full border border-danger bg-danger/10 px-4 py-2 text-xs font-semibold text-danger",children:"Clear All Filters"})})]})]}),e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:[c.length," deck",c.length===1?"":"s"," found"]}),e.jsxs("div",{className:"inline-flex items-center gap-2 text-sm text-muted-foreground",children:[T(a),e.jsxs("span",{children:[a==="popular"&&"Most Popular",a==="newest"&&"Newest First",a==="difficulty"&&"By Difficulty",a==="official"&&"Official First"]})]})]}),m&&e.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 rounded-2xl border bg-card p-8 text-muted-foreground",children:[e.jsx("span",{className:"inline-block h-10 w-10 animate-spin rounded-full",style:{borderWidth:"4px",borderStyle:"solid",borderColor:"rgba(77, 107, 254, 0.2)",borderTopColor:"var(--color-primary)"}}),e.jsx("p",{className:"text-sm",children:"Loading public decks..."})]}),p&&e.jsx("div",{className:"rounded-xl border border-danger bg-danger/10 px-4 py-3 text-danger",children:"Failed to load decks. Please try again."}),!m&&!p&&c.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 rounded-2xl border border-dashed bg-muted/20 px-6 py-12 text-center text-muted-foreground",children:[e.jsx(F,{className:"h-12 w-12"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-primary",children:"No decks found"}),e.jsx("p",{className:"max-w-md text-sm",children:"Try adjusting your search terms or filters to discover more decks."})]}),e.jsx("button",{type:"button",onClick:S,className:"inline-flex items-center gap-2 rounded-full border px-4 py-2 text-xs font-semibold text-primary",children:"Clear Filters"})]}),!m&&!p&&c.length>0&&e.jsx("div",{className:"grid gap-6 md:grid-cols-2 xl:grid-cols-3",children:c.map(t=>e.jsxs("div",{className:"relative",children:[e.jsx(H,{deck:t,onClick:()=>N(t)}),e.jsx("div",{className:"absolute right-4 top-4 rounded-full border bg-card px-2 py-1 shadow-lg",style:{backdropFilter:"blur(6px)",backgroundColor:"rgba(255, 255, 255, 0.9)"},children:e.jsx(X,{deckId:t.deckId,initialLikeCount:t.likeCount,size:"small"})})]},t.deckId))})]})]})})};export{re as default};
